<mat-toolbar color="primary" class="chat-toolbar">
  <!-- sidebar toggle button -->
  <button mat-icon-button [style.alignSelf]="'center'" class="p-0 " (click)="hideWindow()" >
    <mat-icon>keyboard_backspace</mat-icon>
  </button>
  <!-- Selected active user -->
  <div class="active-chat-user" fxLayout="row" fxLayoutAlign="start center" *ngIf="activeContact._id">
    <a [ngClass]="{online: activeContact.status === 'online'}" class="toolbar-avatar mr-1">
      <img [src]="activeContact.avatar" alt="">
      <span class="status-dot"></span>
    </a>
    <div fxLayout="column">
      <h6 class="m-0 font-normal fz-1">{{activeContact.name}}</h6>
      <span class="typing--msg">{{typeing ? typeing : ''}}</span>
    </div>
  </div>
  <!-- Right side top menu -->
  <span fxFlex></span>
  <!-- <button 
    [style.alignSelf]="'center'" 
    mat-icon-button 
    [matMenuTriggerFor]="toolbarDDMenu" 
    class="topbar-button-right hidden-on-open p-0">
        <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #toolbarDDMenu="matMenu">
        <button mat-menu-item><mat-icon>account_circle</mat-icon>Contact info</button>
        <button mat-menu-item><mat-icon>volume_mute</mat-icon>Mute</button>
        <button mat-menu-item><mat-icon>delete</mat-icon>Clear chat</button>
    </mat-menu> -->
</mat-toolbar>

<div *ngIf="chatCollection">
  <!-- Main chat body -->
  <div class="conversations-hold" [perfectScrollbar]>
    <!-- single chat item -->
    <div class="single-conversation" fxLayout="row" *ngFor="let chat of chatCollection?.chats" [ngClass]="{sender: chat.contactId === activeContact._id, me: chat.contactId !== activeContact._id}">
      <!-- <a *ngIf="chat.contactId !== activeContact._id" href="" class="toolbar-avatar online"  [ngClass]="online">
        <img [src]="profilePicture" [alt]="fullName">
        <span class="status-dot"></span>
      </a>
      <a *ngIf="chat.contactId === activeContact._id" href="" class="toolbar-avatar" [ngClass]="{online: activeContact.status === 'online'}">
        <img [src]="activeContact?.avatar" [alt]="activeContact?.name">
        <span class="status-dot"></span>
      </a>-->
      <div class="chat--design">
        <div class="arrow_box"></div>
        <div class="conversation-msg">
          {{chat.text}}
        </div>
        <!-- relativeTime -->
        <p class="chat-date text-muted">{{chat.time | date: 'medium'}}</p>
      </div>
    </div>
  </div>
  <mat-divider></mat-divider>
  <!-- Input box and send button -->
  <div class="chat-input-actions chat-footer">
    <form #msgForm="ngForm" class="inputForm llp-form-wrapper align--items--center" (ngSubmit)="sendMessage($event)" (keyup.enter)="sendMessage($event)" fxLayout="row">
        <main class="chat-window">
          <section class="chat-session">
            <emoji-mart class="emoji-mart" set="emojione" (emojiSelect)="addEmoji($event)" *ngIf="showEmojiPicker" title="Pick your emojiâ€¦"></emoji-mart>
          </section>
        </main>
        <!-- <button type="button" class="toggle-emoji" (click)="toggleEmojiPicker()" style="cursor: pointer;"><mat-icon>emoji_emotions</mat-icon></button> -->
        <mat-icon class="toggle--emoji toggle-emoji" (click)="toggleEmojiPicker()" style="cursor: pointer;">mood</mat-icon>
        <textarea #msgInput ngModel placeholder="Type your message" name="message" class="type--text inputText"
         value="" (keydown.enter)="$event.preventDefault()" (keyup)="checkSend($event)" (keypress)="checkSend($event)"></textarea>

      <button mat-fab color="primary" type="submit" class="send--trriger--btn" [disabled]="!isButtonEnabled">
        <mat-icon>send</mat-icon>
      </button>
    </form>
  </div>
</div>
<div class="chat-intro" *ngIf="!chatCollection" fxLayout="column" fxLayoutAlign="center center">
  <h6>Select a contact and start chat</h6>
</div>