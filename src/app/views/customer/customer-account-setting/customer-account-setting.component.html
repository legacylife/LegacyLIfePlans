<div class="container llp--left--panel--view cust--acc--sett--wrapper">
  <mat-sidenav-container>
    <mat-sidenav EgretSideNavToggle class="shop-sidebar llp--menu--list">
      <div class="shop-filters-wrap llp--left--panel">
        <mat-card class="account--profile">
          <div class="account--pic--wrapper">
            <div class="account--pic">
              <img src="{{profilePicture}}" />
            </div>
            <div class="edit--pic">
              <mat-icon title="edit customer image" (click)="changePicModal()">edit</mat-icon>
              <!--(click)="profilePic.click()"-->
              <input type="file" name="profilePicture" #profilePic id="profilePicture" class=" profile-pic-input"
                (change)="showSelectedProfilePicture()" accept="image/*" style="display:none;" />
            </div>
          </div>

          <div class="acc--user--details text-center">
            <h2 *ngIf="profile.city">{{profile?.firstName}} {{profile?.lastName}}</h2>
            <p *ngIf="profile.city">{{profile?.city}}, {{profile?.state}} - {{profile?.zipcode}}</p>
            <div class="sta--m">
              <mat-icon>star</mat-icon> {{profile?.userType}}
            </div>
          </div>

          <div class="email--phone">
            <mat-icon>markunread</mat-icon>
            <span>{{profile?.username}}</span>
          </div>
          <div class="email--phone mb-0">
            <mat-icon>phone</mat-icon>
            <span>+1 {{profile?.phoneNumber}}</span>
          </div>

          <div class="storage--sec">
            <label class="storage">Storage</label>
            <mat-progress-bar mode="determinate" value="{{spaceProgressBar}}"></mat-progress-bar>
            <label class="remain">
              {{totalUsedSpace}} {{usedSpaceDimension}} of {{totalSpaceAlloted}} {{spaceDimension}} Used
            </label>
          </div>
          <div class="deactivate--acc">
            <a class="clr--red fnt--16">Deactivate account</a>
          </div>

        </mat-card>
      </div>
    </mat-sidenav>
    <div class="shop-wrap llp--content--wrapper" fxLayout="row" fxLayoutWrap="wrap">
      <!-- Filters -->
      <!-- Right side -->
      <div class="full-width">
        <!-- toggleSideNav -->
        <div class="shop-top-toolbar p-0 llp--toggle-btn">
          <button mat-icon-button class="p-0" (click)="toggleSideNav()">
            <mat-icon>short_text</mat-icon>
          </button>
        </div>
        <!-- Account details -->
        <mat-tab-group class="acc--sett--tab">
          <mat-tab label="Account Details">
            <!-- account details -->
            <form class="llp-form-wrapper" [formGroup]="ProfileForm">
              <div class="account--details">
                <div fxLayout="row wrap">
                  <div fxFlex.xs="100" fxFlex.sm="40" fxFlex.md="40" fxFlex.lg="40" fxFlex.xl="40">

                    <mat-form-field class="full-width">
                      <input (keyup)="firstCapitalize($event)" (keypress)="checkSpecialChar($event)" matInput
                        name="firstName" placeholder="First Name*" value=""
                        [formControl]="ProfileForm.controls['firstName']">
                      <mat-icon matTooltip="Please enter first name." matTooltipClass="llp--tooltip error"
                        *ngIf="ProfileForm.controls['firstName'].hasError('required') && ProfileForm.controls['firstName'].touched"
                        class="red--alert">help_outline</mat-icon>
                    </mat-form-field>
                    <mat-form-field class="full-width">
                      <input (keyup)="firstCapitalize($event)" (keypress)="checkSpecialChar($event)" matInput
                        name="lastName" placeholder="Last Name*" value=""
                        [formControl]="ProfileForm.controls['lastName']">
                      <mat-icon matTooltip="Please enter last name." matTooltipClass="llp--tooltip error"
                        *ngIf="ProfileForm.controls['lastName'].hasError('required') && ProfileForm.controls['lastName'].touched"
                        class="red--alert">help_outline</mat-icon>
                    </mat-form-field>

                    <mat-form-field class="full-width">
                      <input matInput placeholder="Mobile Number*" type="tel" value="" class=""
                        [formControl]="ProfileForm.controls['phoneNumber']">
                      <span matPrefix>+1</span>
                      <mat-icon matTooltip="Please enter mobile number." matTooltipClass="llp--tooltip error"
                        *ngIf="ProfileForm.controls['phoneNumber'].hasError('required') && ProfileForm.controls['phoneNumber'].touched"
                        class="red--alert">help_outline</mat-icon>
                      <mat-icon matTooltip="Please enter valid mobile number." matTooltipClass="llp--tooltip error"
                        *ngIf="ProfileForm.controls['phoneNumber'].hasError('pattern') && ProfileForm.controls['phoneNumber'].touched"
                        class="red--alert">help_outline</mat-icon>
                    </mat-form-field>
                    <mat-form-field class="full-width">
                      <input matInput placeholder="Landline Number*" type="tel" value="" class=""
                        [formControl]="ProfileForm.controls['landlineNumber']">
                      <span matPrefix>+1</span>
                      <mat-icon matTooltip="Please enter landline number." matTooltipClass="llp--tooltip error"
                        *ngIf="ProfileForm.controls['landlineNumber'].hasError('required') && ProfileForm.controls['landlineNumber'].touched"
                        class="red--alert">help_outline</mat-icon>
                      <mat-icon matTooltip="Please enter valid landline number." matTooltipClass="llp--tooltip error"
                        *ngIf="ProfileForm.controls['landlineNumber'].hasError('pattern') && ProfileForm.controls['landlineNumber'].touched"
                        class="red--alert">help_outline</mat-icon>
                    </mat-form-field>

                    <mat-form-field class="full-width llp-datepicker">
                      <input matInput [matDatepicker]="dp" (focus)="dp.open()" placeholder="Date Of Birth" value=""
                        readonly [max]="maxDate" [formControl]="ProfileForm.controls['dateOfBirth']">
                      <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                      <mat-datepicker #dp startView="multi-year" panelClass="example-month-picker">
                      </mat-datepicker>
                    </mat-form-field>

                    <mat-form-field class="full-width no-mar">
                      <input matInput name="username" placeholder="Email Address" value="" aria-readonly="true" readonly
                        [formControl]="ProfileForm.controls['username']">
                    </mat-form-field>

                    <div class="full-width text-right">
                      <a class="clr--red fnt--16" (click)="changePasspordModal()">Change password</a>
                    </div>
                  </div>
                  <div fxFlex.xs="100" fxFlex.sm="60" fxFlex.md="60" fxFlex.lg="60" fxFlex.xl="60">
                    <div class="manage--sub--section">
                      <header>
                        <div class="stan--plan"> {{planName}} plan</div>
                        <div class="ur--sub" *ngIf="isSubscribePlan && autoRenewalVal && !isSubscriptionCanceled">Your subscription will automatically renew on
                          <span>{{subscriptionExpireDate}}</span>
                        </div>
                        <div class="ur--sub" *ngIf="isSubscribePlan && (!autoRenewalVal || isSubscriptionCanceled)">Your subscription will expire on
                          <span>{{subscriptionExpireDate}}</span>
                        </div>
                        <div class="ur--sub" *ngIf="isAccountFree || (!isSubscribePlan && isPremiumExpired)">Your plan will expire on
                          <span>{{subscriptionExpireDate}}</span>
                        </div>
                      </header>
                      <div class="llp--slide--wrapper">
                        <div class="set-auto">Set auto-payment option</div>
                        <mat-slide-toggle class="llp--slide--toggle" [checked]="autoRenewalFlag" [disabled]="isAccountFree || isSubscriptionCanceled || (!isSubscribePlan && isPremiumExpired)" (click)="(isSubscribePlan && !isSubscriptionCanceled) && autoRenewal()">{{autoRenewalStatus | uppercase}}</mat-slide-toggle>
                      </div>
                      <p class="turning">Turning the auto-payment option ON will automatically deduct the subscription
                        amount from your associated
                        card
                      </p>
                      <div class="manage--cancel">
                        <button mat-raised-button class="llp--primary--green--btn" [class.not-allowed]="isSubscribePlan && !isPremiumExpired" [disabled]="isSubscribePlan && !isPremiumExpired" [routerLink]="'/customer/customer-subscription'">Manage subscription</button>
                        <a class="clr--red" [class.not-allowed]="!isSubscribePlan || isSubscriptionCanceled" [attr.disabled]="!isSubscribePlan || isSubscriptionCanceled" (click)="isSubscribePlan && !isSubscriptionCanceled && cancelSubscription()">Cancel subscription</a>
                      </div>
                    </div>
                    <div class="upgrade--account " *ngIf="isProUser && isSubscribePlan">
                      <header>
                        <div class="add--on">
                          <mat-checkbox (click)="getAddOnPack()" [checked]="isGetAddOn" [disabled]="isGetAddOn" [class.not-allowed]="isGetAddOn"> Add On </mat-checkbox>
                        </div>
                        <div class="add--info">
                          <p>Legacy Life Memory Plus!</p>
                          <p class="m-0"><span>{{addOnSpaceDisplay}} {{spaceDimension}} </span> upgrade <span>${{addOnAmount}} </span> {{addOnAmountFor}}</p>
                        </div>
                      </header>
                      <div class="text-center">
                        <button mat-raised-button class="llp--primary--green--btn llp--primary--sm--btn upgrade--btn" [class.not-allowed]="(isProUser && isGetAddOn) || !getAddOn" [disabled]="(isProUser && isGetAddOn) || !getAddOn" (click)="isProUser && !isGetAddOn && openCardDetailsModal();">Upgrade</button>
                      </div>
                      <p class="space--info m-0">The memory upgrade is for additional video and picture storage that
                        will offer a total of 17 gigs. In most circumstances the Legacy plan documents will use less
                        than 1 gig. We hope you’ll record many memories to share with your family and friends. The
                        additional memory is available to add at any time. </p>
                    </div>

                  </div>
                </div>
                <div fx.Flex="100" class="text-center mt--30">
                  <button mat-raised-button type="button" class="llp--secondary--btn mr-1"
                    [routerLink]="'/customer/dashboard'">Cancel</button>
                  <button mat-raised-button class="llp--primary--btn" [disabled]="ProfileForm.invalid" (click)="ProfileSubmit()">Save</button>
                </div>
              </div>
            </form>

          </mat-tab>
          <mat-tab label="Address">

            <!-- Address details -->
            <div class="account--details">
              <form class="llp-form-wrapper" [formGroup]="AddressForm" (ngSubmit)="AddressSubmit()">
                <div fxLayout="row wrap" fxLayoutGap-sm="5px">
                  <div fxFlex.xs="100" fxFlex.sm="46" fxFlex.md="46" fxFlex.lg="48" fxFlex.xl="48" class="pad--r--lg">
                    <mat-form-field class="full-width">
                      <input (keyup)="firstCapitalize($event)" (keypress)="checkSpecialChar($event)" matInput
                        name="addressLine1" placeholder="Address Line 1*" value=""
                        [formControl]="AddressForm.controls['addressLine1']">
                      <mat-icon matTooltip="Please enter address in line 1." matTooltipClass="llp--tooltip error"
                        *ngIf="AddressForm.controls['addressLine1'].hasError('required') && AddressForm.controls['addressLine1'].touched"
                        class="red--alert">help_outline</mat-icon>
                    </mat-form-field>
                  </div>
                  <div fxFlex.xs="100" fxFlex.sm="46" fxFlex.md="46" fxFlex.lg="48" fxFlex.xl="48" class="pad--r--lg">
                    <mat-form-field class="full-width">
                      <input (keyup)="firstCapitalize($event)" (keypress)="checkSpecialChar($event)" matInput
                        name="addressLine2" placeholder="Address Line 2 (optional)" value=""
                        [formControl]="AddressForm.controls['addressLine2']">
                    </mat-form-field>
                  </div>
                </div>
                <div fxLayout="row wrap" fxLayoutGap-sm="5px">
                  <div fxFlex.xs="100" fxFlex.sm="46" fxFlex.md="46" fxFlex.lg="48" fxFlex.xl="48" class="pad--r--lg">
                    <mat-form-field class="full-width">
                      <input (keyup)="firstCapitalize($event)" (keypress)="checkSpecialChar($event)" matInput
                        name="City" placeholder="City*" value="" [formControl]="AddressForm.controls['city']">
                      <mat-icon matTooltip="Please enter city." matTooltipClass="llp--tooltip error"
                        *ngIf="AddressForm.controls['city'].hasError('required') && AddressForm.controls['city'].touched"
                        class="red--alert">help_outline</mat-icon>
                    </mat-form-field>
                  </div>
                  <div fxFlex.xs="100" fxFlex.sm="46" fxFlex.md="46" fxFlex.lg="48" fxFlex.xl="48" class="pad--r--lg">
                    <mat-form-field class="full-width">
                      <mat-select placeholder="State*" [formControl]="AddressForm.controls['state']">
                        <mat-option value="">Select a state</mat-option>
                        <mat-option *ngFor="let option of stateList" [value]="option.state_name">{{option.state_name}}
                        </mat-option>
                      </mat-select>
                      <mat-icon matTooltip="Please select state." matTooltipClass="llp--tooltip error"
                        *ngIf="AddressForm.controls['state'].hasError('required') && AddressForm.controls['state'].touched"
                        class="red--alert">help_outline</mat-icon>
                    </mat-form-field>
                  </div>
                </div>
                <div fxLayout="row wrap" fxLayoutGap-sm="5px">
                  <div fxFlex.xs="100" fxFlex.sm="48" fxFlex.md="48" fxFlex.lg="48" fxFlex.xl="48" class="pad--r--lg">
                    <mat-form-field class="full-width">
                      <input matInput name="ZipCode" placeholder="Zip Code*" value=""
                        [formControl]="AddressForm.controls['zipcode']">
                      <mat-icon matTooltip="Please enter zipcode." matTooltipClass="llp--tooltip error"
                        *ngIf="AddressForm.controls['zipcode'].hasError('required') && AddressForm.controls['zipcode'].touched"
                        class="red--alert">help_outline</mat-icon>
                      <mat-icon matTooltip="Please enter valid zipcode." matTooltipClass="llp--tooltip error"
                        *ngIf="AddressForm.controls['zipcode'].hasError('pattern') && AddressForm.controls['zipcode'].touched"
                        class="red--alert">help_outline</mat-icon>
                    </mat-form-field>
                  </div>
                </div>
                <div fx.Flex="100" class="text-center mt--30">
                  <button mat-raised-button type="button" class="llp--secondary--btn mr-1"
                    [routerLink]="'/customer/dashboard'">Cancel</button>
                  <button mat-raised-button class="llp--primary--btn" [disabled]="AddressForm.invalid">Save</button>
                </div>
              </form>
            </div>
          </mat-tab>
        </mat-tab-group>


      </div>

    </div>
  </mat-sidenav-container>
</div>