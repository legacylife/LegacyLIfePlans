<div class="shop-wrap llp--content--wrapper" fxLayout="row" fxLayoutWrap="wrap">
  <div class="full-width">
    <div class="">
      <mat-card class="empty--section p-0">
        <mat-card-header class="m-0">
          <mat-card-title class="m-0" [routerLink]="['/customer/dashboard/emergency-contacts']">Emergency Contacts
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p class="info m-0">The section where you can manage your Emergency Contacts</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="empty--section p-0">
        <mat-card-header class="m-0">
          <mat-card-title class="m-0">Contacts</mat-card-title>
          <div *ngIf="showContactListing">
            <!--span class="no--of--trustee">{{showContactCnt}} Contact{{showContactCnt>1 ? 's' : ''}}</span-->
            <button mat-raised-button class="llp--primary--btn llp--primary--sm--btn" (click)="openModal(contactForm)">+
              Add</button>
          </div>
        </mat-card-header>
        <mat-card-content *ngIf="!showContactListing">
          <div class="build--ur--legacy" (click)="openModal(contactForm)">
            <mat-icon>person_pin</mat-icon>
            <p>
              <a>Add Emergency Contacts</a>
            </p>
          </div>
        </mat-card-content>

        <mat-card-content class="appointees--wrapper" *ngIf="showContactListing">
            <div class="cust--user--details mt-1" *ngFor="let profileData of eContactList; let i = index" [routerLink]="['/customer/dashboard/emergency-contacts-details', profileData._id]">
            <div class="name--letters">{{profileData?.name.charAt(0)}}</div>
            <div class="user--name">
              <h5>{{profileData.name}}</h5>
              <p class="mb-0">Last modified:
                <span>{{profileData.modifiedOn | date: 'yyyy/MM/dd'}}</span>
              </p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>


<ng-template #contactForm let-c="close" let-d="dismiss">
  <div class="ll--modal--header llp--close--modal">
    <h3 class="main--head text-center">Emergency Contact Details</h3>
    <button class="modal--close" [mat-dialog-close]="">
      <mat-icon class="icon--cross">cancel</mat-icon>
    </button>
  </div>
  <div class="ll--modal--body per--profile--wrapper p-10">
    <form [formGroup]="eContactFormGroup" class="llp-form-wrapper" (ngSubmit)="eContactFormSubmit(eContactFormGroup.value)">
      <div class="profile--body--scroll">
        <mat-form-field class="full-width">
            <input (keyup)="firstCapitalize($event)" matInput name="name" placeholder="Name*" [formControl]="eContactFormGroup.controls['name']"  (keypress)="checkSpecialChar($event)">
            <mat-icon matTooltip="Please enter name" matTooltipClass="llp--tooltip error" *ngIf="eContactFormGroup.controls['name'].hasError('required') && eContactFormGroup.controls['name'].touched" class="red--alert">help_outline</mat-icon>
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>Relationship*</mat-label>
        <mat-select placeholder="Relationship*" name="relationship" [formControl]="eContactFormGroup.controls['relationship']" >
          <mat-option value="">Select Relationship Type</mat-option>
          <mat-option *ngFor="let option of relationshipList"  [value]="option.opt_code">{{option.opt_name}}</mat-option>
        </mat-select>
          <mat-icon matTooltip="Please select relationship" matTooltipClass="llp--tooltip error" *ngIf="eContactFormGroup.controls['relationship'].hasError('required') && eContactFormGroup.controls['relationship'].touched" class="red--alert">help_outline</mat-icon>
        </mat-form-field>

        <mat-form-field class="full-width">
            <input (keyup)="firstCapitalize($event)" matInput name="address" placeholder="Address" [formControl]="eContactFormGroup.controls['address']"  (keypress)="checkSpecialChar($event)">
        </mat-form-field>

        <mat-form-field class="full-width">
            <input (keyup)="firstCapitalize($event)" matInput name="phone" placeholder="Phone" [formControl]="eContactFormGroup.controls['phone']">    
            <span matPrefix>+1</span>    
        </mat-form-field>

        <mat-form-field class="full-width">
            <input (keyup)="firstCapitalize($event)" matInput name="mobile" placeholder="Mobile" [formControl]="eContactFormGroup.controls['mobile']">     
        </mat-form-field>

        <mat-form-field class="full-width">
            <input matInput name="emailAddress" placeholder="Email*" [formControl]="eContactFormGroup.controls['emailAddress']">     
            <mat-icon matTooltip="Please enter email id" matTooltipClass="llp--tooltip error" *ngIf="eContactFormGroup.controls['emailAddress'].hasError('required') && eContactFormGroup.controls['emailAddress'].touched"
            class="red--alert">help_outline</mat-icon>
            <mat-icon matTooltip="Please enter valid email Id." matTooltipClass="llp--tooltip error" *ngIf="eContactFormGroup.controls['emailAddress'].hasError('pattern')"
            class="red--alert">help_outline</mat-icon>
        </mat-form-field>

        <input matInput name="profileId" [formControl]="eContactFormGroup.controls['profileId']" readonly="readonly">

      </div>
      <!-- <div class="mt-1 text-center"> -->
       <div class="ll--modal--footer text-center">
           <button mat-raised-button class="llp--primary--btn" [disabled]="eContactFormGroup.invalid">Save</button>       
      </div>
    </form>
  </div>
</ng-template>